[build]
builder = "nixpacks"

[deploy]
healthcheckPath = "/api/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[[services]]
name = "excel-ai-backend"
source = "excel_ai_backend"

[services.variables]
FLASK_ENV = "production"
PYTHONPATH = "/app"
PORT = "${{ PORT }}"

[[services]]
name = "excel-ai-frontend"  
source = "excel-ai-frontend"

[services.variables]
NODE_VERSION = "20"
VITE_API_BASE_URL = "${{ excel-ai-backend.RAILWAY_PUBLIC_DOMAIN }}"
